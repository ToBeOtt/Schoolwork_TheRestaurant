@using TheRestaurant.Presentation.Client.ClientServices
@inject ClientDashboardServices DashboardService

<MudChart 
	Class=""
	ChartType="ChartType.Bar" 
	ChartSeries="@Series" 
	XAxisLabels="@XAxisLabels" 
	Width="100%" 
	Height="350px"
	>

</MudChart>

@code {

    // Chart-specific code
    public List<ChartSeries> Series = new List<ChartSeries>()
    {
        new ChartSeries() { Name = "Veckans ordrar", Data = new double[] { 40, 20, 25, 27, 46, 60, 48 } },
    };
    public string[] XAxisLabels;  // Initialize as an empty array

    private DateTime ChosenDate;

    protected override async Task OnInitializedAsync()
    {
        var result = await DashboardService.GetWeeklyOrderStats(DateTime.Today);

        XAxisLabels = new string[result.Count];

        for (int i = 0; i < XAxisLabels.Length; i++)
        {
            XAxisLabels[i] = result[i].OrderDate;
        }
    }

}
